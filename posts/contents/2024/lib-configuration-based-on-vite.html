<!DOCTYPE html><html lang="ko" class="__variable_fde3a9 __variable_164a00"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4974d0dc1d063735-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/bb3ef058b751a6ad-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/ff840cfebfb63b0c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/images/posts/2024/lib-configuration-based-on-vite/rollup-build-time.png" fetchPriority="high"/><link rel="preload" as="image" href="/images/posts/2024/lib-configuration-based-on-vite/vite-build-time.png" fetchPriority="high"/><link rel="stylesheet" href="/_next/static/css/31503e2939d29c02.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f28ea1567d198d0a.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-aa7f38177d8ee85c.js"/><script src="/_next/static/chunks/86cc20f5-fcd1555cfdfd94c1.js" async=""></script><script src="/_next/static/chunks/879-3a86667338030209.js" async=""></script><script src="/_next/static/chunks/main-app-e4c2129efb1ad11c.js" async=""></script><script src="/_next/static/chunks/566-ec14f674f7a91999.js" async=""></script><script src="/_next/static/chunks/269-eaf94b263c957a22.js" async=""></script><script src="/_next/static/chunks/app/posts/contents/%5B...slug%5D/page-61e2b7ba0b345ae4.js" async=""></script><script src="/_next/static/chunks/06807f6d-32e1b7e0143b0f73.js" async=""></script><script src="/_next/static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js" async=""></script><script src="/_next/static/chunks/534-71c5a4434abe7a59.js" async=""></script><script src="/_next/static/chunks/app/layout-7b8cd41bcd4dc231.js" async=""></script><title>라이브러리 개발 환경 설정 후기 (Rollup -&gt; Vite 전환 후기) | k2ep-ru2ning</title><meta name="description" content="Vite 기반의 React 컴포넌트 라이브러리 개발 환경 설정 후기"/><meta name="author" content="k2ep-ru2ning"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><link rel="apple-touch-icon" href="/apple-icon.png?a4b7945e0e6b49fb" type="image/png" sizes="180x180"/><meta name="next-size-adjust"/><script>(function P(){let e=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";"dark"===(e||s)?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})();</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="font-sans bg-zinc-50 dark:bg-zinc-950 text-zinc-950 dark:text-zinc-50"><div class="px-4 max-w-screen-md mx-auto min-h-dvh flex flex-col"><header class="sticky top-0 backdrop-blur-sm flex items-center justify-between py-4"><div class="shrink-0"><a class="flex flex-col text-center p-2 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700" href="/"><h1 class="font-extrabold text-xl">k2ep-ru2ning</h1></a></div><button class="hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex sm:hidden justify-center items-center rounded-md" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rpkq:" data-state="closed"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="18" y2="18"></line></svg></button><div class="hidden sm:flex gap-3 h-8"><nav class="flex gap-2"><a class="hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex justify-center items-center rounded-md" data-state="closed" href="/"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></a><a class="hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex justify-center items-center rounded-md" data-state="closed" href="/posts/pages/1"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 13-2 2 2 2"></path><path d="m14 17 2-2-2-2"></path></svg></a><a class="hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex justify-center items-center rounded-md" data-state="closed" href="/tags"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"></path><path d="M6 9.01V9"></path><path d="m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"></path></svg></a></nav><div data-orientation="vertical" role="none" class="w-[1px] h-full bg-zinc-300 dark:bg-zinc-700"></div><div class="flex gap-2"><a href="https://github.com/k2ep-ru2ning/k2ep-ru2ning.github.io" target="_blank" rel="noopener noreferrer" class="hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex justify-center items-center rounded-md" data-state="closed"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"></path></svg></a></div><div data-orientation="vertical" role="none" class="w-[1px] h-full bg-zinc-300 dark:bg-zinc-700"></div><button type="button" class="hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex justify-center items-center rounded-md" data-state="closed"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="dark:hidden size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="hidden dark:block size-6" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div></header><div class="px-2 py-6 grow"><article class="flex flex-col gap-y-6"><header class="flex flex-col gap-y-4 sm:gap-y-6"><h1 class="text-2xl sm:text-3xl font-bold">라이브러리 개발 환경 설정 후기 (Rollup -&gt; Vite 전환 후기)</h1><div class="flex flex-wrap gap-3 items-center"><a class="text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700" href="/tags/react/pages/1">react</a><a class="text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700" href="/tags/vite/pages/1">vite</a><a class="text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700" href="/tags/개발환경-설정/pages/1">개발환경-설정</a><a class="text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700" href="/tags/회고/pages/1">회고</a></div><time class="flex items-center gap-x-1.5 text-sm"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="size-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z"></path></svg>2024.06.12</time></header><div data-orientation="horizontal" role="none" class="w-full h-[1px] bg-zinc-300 dark:bg-zinc-700 shrink-0"></div><div class="prose prose-zinc dark:prose-invert prose-sm sm:prose-base prose-code:text-sm sm:prose-code:text-base max-w-full"><h2>문제</h2>
<p>회사에서 React 컴포넌트 라이브러리를 개발하는 중인데, 기존에는 빌드 도구로 Rollup을 사용하고 있었다.</p>
<p>팀에서는 <code>yarn link</code>를 활용해 개발 중인 라이브러리의 심볼릭 링크를 만들고, (local의) 테스트용 애플리케이션에서 라이브러리를 링크해서 개발하고 있었다. 코드를 변경할 때마다 라이브러리가 빌드되고, 빌드된 결과물이 테스트용 애플리케이션에 반영되어 화면에 변경사항이 표시되는 방식이다.</p>
<p>그런데, <strong>빌드 시간이 1분 넘게 걸렸기 때문에, 코드를 변경하고 변경사항을 눈으로 확인하는 데 너무 오래 걸렸다.</strong></p>
<img alt="rollup build 속도" fetchPriority="high" width="420" height="120" decoding="async" data-nimg="1" class="rounded-md mx-auto" style="color:transparent" src="/images/posts/2024/lib-configuration-based-on-vite/rollup-build-time.png"/>
<p>기존에 사용하던 Rollup 버전이 너무 오래 되었고(기존 버전: <code>2</code>, 24.06.12 기준 최신 버전: <code>4</code>), Rollup 설정 파일도 2년에 퇴사 하신분의 commit을 끝으로 관리되지 않았다.</p>
<p>그래서 최근 빠른 속도로 각광 받고 있는 Vite를 도입하면서 빌드 속도를 개선하기로 했다.</p>
<h2>사용한 Vite 플러그인</h2>
<h3>@vitejs/plugin-react</h3>
<p>Vite 프로젝트에서 React를 사용할 수 있게 만드는 플러그인, Babel 기반.</p>
<h3>vite-plugin-dts</h3>
<p>lib mode로 Vite를 사용할 때, declaration file(<code>*.d.ts</code>)을 생성해주는 플러그인.</p>
<p>개발 중인 라이브러리가 TypeScript로 작성한 라이브러리이기도 하고, 클라이언트 코드에서 타입 추론이 가능하도록 이 플러그인을 사용했다.</p>
<h3>vite-tsconfig-paths</h3>
<p><code>tsconfig.json</code>에 작성한 <code>compilerOptions.paths</code>를 이용해, Vite가 모듈의 위치를 찾도록 도와주는 플러그인.</p>
<p><code>vite.config.ts</code>에 <code>resolve.alias</code>를 설정할 필요가 없어진다. (같은 설정을 <code>tsconfig.json</code>과 <code>vite.config.ts</code>에 해야하는 불편함을 해결해준다.)</p>
<h3>vite-plugin-css-injected-by-js</h3>
<p>Vite로 빌드하면, bundle된 js 파일과 css 파일이 생성된다. 이때 생성된 css를 bundle된 js 내부에서 import하도록 만들고 싶어서 이 플러그인을 사용했다. 이렇게 하면, 클라이언트 코드에서 별도로 라이브러리의 css 파일을 import 할 필요가 없다.</p>
<h2>Vite 플러그인 설정하기</h2>
<p><strong>@vitejs/plugin-react</strong> 플러그인을 사용해서 Vite 프로젝트에서 React 코드를 작성할 수 있게 했고, <strong>vite-plugin-dts</strong> 플러그인을 사용해서 lib 모드로 빌드할 때, <code>*.d.ts</code> 파일들을 생성하게 만들었다.</p>
<p><strong>vite-tsconfig-paths</strong> 플러그인을 이용해 path에 대한 alias 설정을 <code>tsconfig.json</code> 파일에만 하고 동일한 설정을 vite에서 사용할 수 있게 만들었다.</p>
<p>그리고 클라이언트 코드에서 별도로 css 파일을 import 할 필요없도록 생성된 css를 bundle된 js 파일에 주입하게 <strong>vite-plugin-css-injected-by-js</strong> 플러그인을 사용했다.</p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="ts" data-theme="github-dark-default github-light-default">vite.config.ts</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="ts" data-theme="github-dark-default github-light-default"><code data-language="ts" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> { defineConfig } </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> react </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;@vitejs/plugin-react&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> dts </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite-plugin-dts&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> tsconfigPaths </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite-tsconfig-paths&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> cssInjectedByJsPlugin </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite-plugin-css-injected-by-js&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">export</span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E"> default</span><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF"> defineConfig</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">({</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  plugins: [</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    react</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(),</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    dts</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">({</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      /*</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        이 옵션이 false이면</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        기본적으로 {outDir}/src에 index.d.ts를 비롯한</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        *.d.ts 파일을 생성한다.</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        </span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        이 옵션이 true이면</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        {outDir}/dts에 src/index.d.ts를 생성해준다.</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        </span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        즉, dts 디렉터리를 만들고</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        그 디렉터리에 src/index.d.ts 파일을 생성한다. </span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        </span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        dts 디렉터리를 만들고 싶지 않다면 굳이 쓸 필요 없다.</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        그리고 package.json의 </span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        &quot;types&quot;에 index.d.ts 파일 경로를 작성하면 된다.</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      */</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      insertTypesEntry: </span><span style="--shiki-dark:#79C0FF;--shiki-light:#0550AE">true</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    }),</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    tsconfigPaths</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(),</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    cssInjectedByJsPlugin</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(),</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  ]</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">,</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  /*</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    vite-tsconfig-paths 플러그인을 사용했기 때문에</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    이미 tsconfig.json에 설정한 경로 alias 설정을</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    vite 설정 파일에 또 설정할 필요가 없다.</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  */</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  /*</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    resolve: {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      alias: [</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">          find: &#x27;@&#x27;,</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">          replacement: path.resolve(__dirname, &#x27;src&#x27;),</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">        },</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      ],</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    },</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  */</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  // ...</span></span>
<span data-line=""><span style="--shiki-dark:#FFA657;--shiki-light:#953800">})</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span></code></pre></figure>
<h2>Vite 빌드 설정하기</h2>
<p>Vite 프로젝트를 라이브러리 형태로 빌드하기 위해서는 <code>build.lib</code> 옵션을 설정해야 한다.</p>
<p><strong>엔트리 파일이 무엇인지, 패키지 이름은 무엇인지, 빌드 결과로 생성될 js 파일의 이름은 어떻게 할 것인지, 어떤 모듈 시스템을 사용해서 빌드할 것인지</strong> 등을 설정할 수 있다.</p>
<p>추가로, 번들에 포함하고 싶지 않은 dependency들은 <code>build.rollupOptions.external</code>에 명시할 수 있다.</p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="ts" data-theme="github-dark-default github-light-default">vite.config.ts</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="ts" data-theme="github-dark-default github-light-default"><code data-language="ts" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> path </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;node:path&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> { defineConfig } </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">// ...</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">export</span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E"> default</span><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF"> defineConfig</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">({</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  // ...</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  build: {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    // 빌드 결과를 담은 디렉터리.</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    // rollup을 쓸 때도 &quot;dist&quot;였기에 그대로 &quot;dist&quot;로 설정</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    outDir: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;dist&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    lib: {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 엔트리 파일</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      entry: path.</span><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">resolve</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(__dirname, </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;src/index.ts&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">),</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 패키지 이름</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      name: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;@your-company/your-package&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 빌드 결과물 파일 이름</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">      fileName</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: (</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">format</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">) </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">=&gt;</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> `index.${</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">format</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">}.js`</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 어떤 모듈 시스템에 호환되도록 빌드할 것인가</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // rollup을 쓸 때 es, cjs 방식으로 빌드했었기 때문에,</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 해당 방식을 사용하게 설정</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      formats: [</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;es&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">, </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;cjs&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">],</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    rollupOptions: {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 라이브러리 빌드 결과에 포함하고 싶지 않은 패키지를 명시할 수 있다.</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">      // 또한, 이 패키지들을 peer dependencies에 명시하면 된다.</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      external: [</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;react&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;react-dom&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;mobx&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;mobx-react-lite&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;@your-company/your-another-package&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      ],</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  }</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">,</span></span>
<span data-line=""><span style="--shiki-dark:#FFA657;--shiki-light:#953800">})</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span></code></pre></figure>
<h2>전체 Vite 설정</h2>
<p>앞서 언급한 플러그인, 빌드 설정을 정리한 Vite 설정 파일은 다음과 같다. (확실히 기존에 사용하던 rollup 설정 파일보다 간결해졌다.)</p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="ts" data-theme="github-dark-default github-light-default">vite.config.ts</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="ts" data-theme="github-dark-default github-light-default"><code data-language="ts" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> path </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;node:path&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> { defineConfig } </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> react </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;@vitejs/plugin-react&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> dts </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite-plugin-dts&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> tsconfigPaths </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite-tsconfig-paths&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> cssInjectedByJsPlugin </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;vite-plugin-css-injected-by-js&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">export</span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E"> default</span><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF"> defineConfig</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">({</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  plugins: [</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    react</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(),</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    dts</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">({</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      insertTypesEntry: </span><span style="--shiki-dark:#79C0FF;--shiki-light:#0550AE">true</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    }),</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    tsconfigPaths</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(),</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">    cssInjectedByJsPlugin</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(),</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  ]</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  build: {</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    outDir: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;dist&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    lib: {</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      entry: path.</span><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">resolve</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">(__dirname, </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;src/index.ts&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">),</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      name: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;@your-company/your-package&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#D2A8FF;--shiki-light:#8250DF">      fileName</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: (</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">format</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">) </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">=&gt;</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> `index.${</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">format</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">}.js`</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      formats: [</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;es&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">, </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;cjs&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">],</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    rollupOptions: {</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      external: [</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;react&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;react-dom&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;mobx&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;mobx-react-lite&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">        &quot;@your-company/your-another-package&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">      ],</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  }</span><span style="--shiki-dark:#FFA657;--shiki-light:#953800">,</span></span>
<span data-line=""><span style="--shiki-dark:#FFA657;--shiki-light:#953800">})</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span></code></pre></figure>
<h2>package.json 파일 설정</h2>
<p>라이브러리 개발할 때는 <code>main</code>, <code>module</code>, <code>types</code>, <code>files</code> 속성값을 잘 설정하면 된다.</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="json" data-theme="github-dark-default github-light-default"><code data-language="json" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">{</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;name&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;@your-company/your-package&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;type&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;module&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;main&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;./dist/index.cjs.js&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;module&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;./dist/index.es.js&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;types&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;./dist/dts/src/index.d.ts&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;files&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: [</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;dist&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">]</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">}</span></span></code></pre></figure>
<p><code>type</code>은 <code>&quot;module&quot;</code> 또는 <code>&quot;commonjs&quot;</code> 값을 가질 수 있는데, <code>&quot;module&quot;</code>인 경우, <code>.js</code> 파일을 ES 모듈 시스템으로 해석한다는 의미이다.</p>
<p><code>main</code>은 클라이언트 코드에서 라이브러리를 <code>require()</code>로 임포트할 때, 진입점이 되는 파일을 설정한다. vite가 <code>dist/index.cjs.js</code>로 번들링하도록 설정했기 때문에 <code>&quot;./dist/index.cjs.js&quot;</code> 경로를 적어준다.</p>
<p><code>module</code>은 클라이언트 코드에서 라이브러리를 <code>import</code>로 임포트할 때, 진입점이 되는 파일을 설정한다. vite가 <code>dist/index.es.js</code>로 번들링하도록 설정했기 때문에 <code>&quot;./dist/index.es.js&quot;</code> 경로를 적어준다.</p>
<p><code>types</code>에는 타입 선언 파일의 위치를 지정하면 된다. vite-plugin-dts 플러그인이 <code>dist/dts/src/index.d.ts</code>를 생성하므로, <code>&quot;./dist/dts/src/index.d.ts&quot;</code> 경로를 적어준다.</p>
<p><code>files</code>에는 패키지를 배포할 때 포함할 파일이나 디렉터리를 작성하면 된다. dist 디렉터리를 포함해서 배포할 것이므로, <code>[&quot;dist&quot;]</code>를 적어준다.</p>
<h2>link를 이용해 개발하기 위한 명령어</h2>
<p><code>vite build --watch</code> 명령어를 실행하면, file 변경사항이 발생할 때마다(코드 수정사항이 생길 때마다) 빌드되고, 테스트용 애플리케이션에서는 변경사항을 감지해서 화면을 갱신한다.</p>
<h2>클라이언트 코드에서 타입 추론이 제대로 되지 않는 문제 해결</h2>
<p>환경 설정을 끝마쳤다고 생각했는데, 마지막에 클라이언트 코드에서 타입 추론이 제대로 되지 않는 문제가 발생했다.</p>
<p>기존에는 타입스크립트 설정 파일에서 다음과 같이 <strong>상대경로</strong>를 이용해 경로의 alias를 설정했다.</p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="json" data-theme="github-dark-default github-light-default">tsconfig.json</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="json" data-theme="github-dark-default github-light-default"><code data-language="json" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">{</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;compilerOptions&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    // ...</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">    &quot;paths&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: {</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">      &quot;@/*&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: [</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;./src/*&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">]</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    }</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  }</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  // ...</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">}</span></span></code></pre></figure>
<p>그런데 이 경우, 클라이언트 코드에서 타입 추론이 제대로 되지 않았다.</p>
<p>번들된 결과물을 살펴보니, 생성된 <code>*.d.ts</code> 파일에서 <code>@</code> alias가 실제 경로로 변환되지 않고 <code>@</code> 그대로 남아있었다.</p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="ts" data-theme="github-dark-default github-light-default">dist/../index.d.ts</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="ts" data-theme="github-dark-default github-light-default"><code data-language="ts" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> { SomeType } </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;@/types&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span></code></pre></figure>
<p><strong>생성된 <code>*.d.ts</code> 파일들에서 <code>@</code> alias 대신 실제 경로를 표시하려면, 타입스크립트 설정에서 <code>compilerOptions.baseUrl</code> 옵션을 설정하고 <code>compilerOptions.paths</code> 옵션에 &quot;<code>./</code>으로 시작하지 않는 경로&quot;를 작성하면 된다.</strong></p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="json" data-theme="github-dark-default github-light-default">tsconfig.json</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="json" data-theme="github-dark-default github-light-default"><code data-language="json" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">{</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">  &quot;compilerOptions&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: {</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">    // ...</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">    &quot;baseUrl&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: </span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;.&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">,</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">    &quot;paths&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: {</span></span>
<span data-line=""><span style="--shiki-dark:#7EE787;--shiki-light:#116329">      &quot;@/*&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">: [</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069">&quot;src/*&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">]</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">    }</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">  }</span></span>
<span data-line=""><span style="--shiki-dark:#8B949E;--shiki-light:#6E7781">  // ...</span></span>
<span data-line=""><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">}</span></span></code></pre></figure>
<p>번들된 결과물을 살펴보면, 생성된 <code>*.d.ts</code> 파일에서 <code>@</code> alias가 사라지고 실제 경로로 치환되었다.</p>
<figure data-rehype-pretty-code-figure=""><figcaption data-rehype-pretty-code-title="" data-language="ts" data-theme="github-dark-default github-light-default">dist/../index.d.ts</figcaption><pre style="--shiki-dark:#e6edf3;--shiki-light:#1f2328;--shiki-dark-bg:#0d1117;--shiki-light-bg:#ffffff" tabindex="0" data-language="ts" data-theme="github-dark-default github-light-default"><code data-language="ts" data-theme="github-dark-default github-light-default" style="display:grid"><span data-line=""><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">import</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328"> { SomeType } </span><span style="--shiki-dark:#FF7B72;--shiki-light:#CF222E">from</span><span style="--shiki-dark:#A5D6FF;--shiki-light:#0A3069"> &quot;../../../../types&quot;</span><span style="--shiki-dark:#E6EDF3;--shiki-light:#1F2328">;</span></span></code></pre></figure>
<p>그리고 실제로 클라이언트 코드에서 배포한 라이브러리를 사용할 때, <strong>타입 추론이 잘 되었다.</strong></p>
<h2>결과</h2>
<img alt="vite build 속도" fetchPriority="high" width="430" height="170" decoding="async" data-nimg="1" class="rounded-md mx-auto" style="color:transparent" src="/images/posts/2024/lib-configuration-based-on-vite/vite-build-time.png"/>
<p>기존에 <strong>1분이 넘던 빌드시간을 10초대로 줄였다.</strong> 팀에서 <code>yarn link</code>를 활용해 개발하고 있었는데, 코드를 변경할 때마다 발생하는 빌드에 걸리는 시간이 줄어들어 <strong>팀 개발 생산성이 증가했다</strong>. 팀원들도 속도가 빨라져서 많이 좋아했다.</p>
<p>오래된 버전의 Rollup을 최신 버전의 Vite로 전환하면서, 관리 되지 않던 빌드도구 설정 파일을 최신화 할 수 있었다.</p>
<p>과거 Rollup 버전으로 빌드했을 때 클라이언트 코드에서 타입 추론이 되지 않았었는데, Vite로 전환하면서 타입 추론이 가능하게 설정했다.</p>
<p>빌드도구/번들러 설정은 막연히 어렵다고 생각해왔는데, 이번에 Vite로 성공적으로 전환하면서 자신감을 얻을 수 있었다.</p></div></article></div><footer><div data-orientation="horizontal" role="none" class="w-full h-[1px] bg-zinc-300 dark:bg-zinc-700 shrink-0"></div><p class="py-6 sm:py-8 text-center">© 2024 k2ep-ru2ning</p></footer></div><script src="/_next/static/chunks/webpack-aa7f38177d8ee85c.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/4974d0dc1d063735-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/bb3ef058b751a6ad-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/ff840cfebfb63b0c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n4:HL[\"/_next/static/css/31503e2939d29c02.css\",\"style\"]\n5:HL[\"/_next/static/css/f28ea1567d198d0a.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"6:I[9965,[],\"\"]\n9:I[3614,[],\"\"]\nb:I[4738,[],\"\"]\nc:I[6566,[\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"269\",\"static/chunks/269-eaf94b263c957a22.js\",\"487\",\"static/chunks/app/posts/contents/%5B...slug%5D/page-61e2b7ba0b345ae4.js\"],\"\"]\nd:I[8276,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"default\"]\ne:I[4696,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"Provider\"]\nf:I[5931,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"default\"]\n10:I[4696,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"Root\"]\n11:I[4696,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"Trigger\"]\n12:I[4696,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"Portal\"]\n13:I[4696,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a5"])</script><script>self.__next_f.push([1,"9.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"Content\"]\n14:I[4696,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"Arrow\"]\n15:I[3164,[\"773\",\"static/chunks/06807f6d-32e1b7e0143b0f73.js\",\"679\",\"static/chunks/1b7bc3a5-cf68e2152ebb5d4a.js\",\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"534\",\"static/chunks/534-71c5a4434abe7a59.js\",\"185\",\"static/chunks/app/layout-7b8cd41bcd4dc231.js\"],\"default\"]\n17:I[2706,[],\"\"]\na:[\"slug\",\"2024/lib-configuration-based-on-vite\",\"c\"]\n18:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L6\",null,{\"buildId\":\"UJmWLUYgVRbroljD8akUX\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"posts\",\"contents\",\"2024\",\"lib-configuration-based-on-vite\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[\"contents\",{\"children\":[[\"slug\",\"2024/lib-configuration-based-on-vite\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2024\\\",\\\"lib-configuration-based-on-vite\\\"]}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[\"contents\",{\"children\":[[\"slug\",\"2024/lib-configuration-based-on-vite\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L7\",\"$L8\",null],null],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"contents\",\"children\",\"$a\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"contents\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/31503e2939d29c02.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f28ea1567d198d0a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"className\":\"__variable_fde3a9 __variable_164a00\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"(function P(){let e=localStorage.getItem(\\\"theme\\\"),s=window.matchMedia(\\\"(prefers-color-scheme: dark)\\\").matches?\\\"dark\\\":\\\"light\\\";\\\"dark\\\"===(e||s)?document.documentElement.classList.add(\\\"dark\\\"):document.documentElement.classList.remove(\\\"dark\\\")})();\"}}]}],[\"$\",\"body\",null,{\"className\":\"font-sans bg-zinc-50 dark:bg-zinc-950 text-zinc-950 dark:text-zinc-50\",\"children\":[\"$\",\"div\",null,{\"className\":\"px-4 max-w-screen-md mx-auto min-h-dvh flex flex-col\",\"children\":[[\"$\",\"header\",null,{\"className\":\"sticky top-0 backdrop-blur-sm flex items-center justify-between py-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"shrink-0\",\"children\":[\"$\",\"$Lc\",null,{\"href\":\"/\",\"className\":\"flex flex-col text-center p-2 rounded-md hover:bg-zinc-200 dark:hover:bg-zinc-700\",\"children\":[\"$\",\"h1\",null,{\"className\":\"font-extrabold text-xl\",\"children\":\"k2ep-ru2ning\"}]}]}],[[\"$\",\"$Ld\",null,{}],[\"$\",\"div\",null,{\"className\":\"hidden sm:flex gap-3 h-8\",\"children\":[\"$\",\"$Le\",null,{\"delayDuration\":400,\"skipDelayDuration\":100,\"children\":[[\"$\",\"$Lf\",null,{}],[\"$\",\"div\",null,{\"data-orientation\":\"vertical\",\"role\":\"none\",\"className\":\"w-[1px] h-full bg-zinc-300 dark:bg-zinc-700\"}],[\"$\",\"div\",null,{\"className\":\"flex gap-2\",\"children\":[[\"$\",\"$L10\",null,{\"children\":[[\"$\",\"$L11\",null,{\"asChild\":true,\"children\":[\"$\",\"a\",null,{\"href\":\"https://github.com/k2ep-ru2ning/k2ep-ru2ning.github.io\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"hover:bg-zinc-200 dark:hover:bg-zinc-700 size-8 flex justify-center items-center rounded-md\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 16 16\",\"className\":\"size-6\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8\",\"children\":[]}]]],\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]}],[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$L13\",null,{\"side\":\"bottom\",\"sideOffset\":8,\"className\":\"text-sm bg-zinc-200 dark:bg-zinc-700 py-1 px-2 rounded-md flex gap-1 items-center\",\"children\":[\"Github 저장소\",[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"none\",\"strokeWidth\":\"2\",\"viewBox\":\"0 0 24 24\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\",\"children\":[]}],[\"$\",\"polyline\",\"1\",{\"points\":\"15 3 21 3 21 9\",\"children\":[]}],[\"$\",\"line\",\"2\",{\"x1\":\"10\",\"x2\":\"21\",\"y1\":\"14\",\"y2\":\"3\",\"children\":[]}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}],[\"$\",\"$L14\",null,{\"className\":\"fill-zinc-200 dark:fill-zinc-700\"}]]}]}]]}]]}],[\"$\",\"div\",null,{\"data-orientation\":\"vertical\",\"role\":\"none\",\"className\":\"w-[1px] h-full bg-zinc-300 dark:bg-zinc-700\"}],[\"$\",\"$L15\",null,{}]]}]}]]]}],[\"$\",\"div\",null,{\"className\":\"px-2 py-6 grow\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"py-14 flex flex-col gap-y-3\",\"children\":[[\"$\",\"strong\",null,{\"className\":\"text-4xl text-indigo-500 font-bold\",\"children\":\"404\"}],[\"$\",\"p\",null,{\"className\":\"text-3xl font-bold\",\"children\":\"페이지를 찾을 수 없어요\"}],[\"$\",\"p\",null,{\"className\":\"text-xl\",\"children\":\"주소를 확인해주세요\"}],[\"$\",\"$Lc\",null,{\"href\":\"/\",\"className\":\"flex items-center gap-1.5 p-1 rounded-md self-start hover:bg-zinc-200 dark:hover:bg-zinc-700\",\"children\":[\"Home으로 이동\",[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"none\",\"strokeWidth\":\"2\",\"viewBox\":\"0 0 24 24\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"size-5\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\",\"children\":[]}],[\"$\",\"polyline\",\"1\",{\"points\":\"9 22 9 12 15 12 15 22\",\"children\":[]}]]],\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}]]}]]}],\"notFoundStyles\":[]}]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"data-orientation\":\"horizontal\",\"role\":\"none\",\"className\":\"w-full h-[1px] bg-zinc-300 dark:bg-zinc-700 shrink-0\"}],[\"$\",\"p\",null,{\"className\":\"py-6 sm:py-8 text-center\",\"children\":\"© 2024 k2ep-ru2ning\"}]]}]]}]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L16\"],\"globalErrorComponent\":\"$17\",\"missingSlots\":\"$W18\"}]\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"article\",null,{\"className\":\"flex flex-col gap-y-6\",\"children\":[[\"$\",\"header\",null,{\"className\":\"flex flex-col gap-y-4 sm:gap-y-6\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-2xl sm:text-3xl font-bold\",\"children\":\"라이브러리 개발 환경 설정 후기 (Rollup -\u003e Vite 전환 후기)\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-3 items-center\",\"children\":[[\"$\",\"$Lc\",\"0\",{\"href\":\"/tags/react/pages/1\",\"className\":\"text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700\",\"children\":\"react\"}],[\"$\",\"$Lc\",\"1\",{\"href\":\"/tags/vite/pages/1\",\"className\":\"text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700\",\"children\":\"vite\"}],[\"$\",\"$Lc\",\"2\",{\"href\":\"/tags/개발환경-설정/pages/1\",\"className\":\"text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700\",\"children\":\"개발환경-설정\"}],[\"$\",\"$Lc\",\"3\",{\"href\":\"/tags/회고/pages/1\",\"className\":\"text-sm sm:text-base block px-2 py-1 rounded-md bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700\",\"children\":\"회고\"}]]}],[\"$\",\"time\",null,{\"className\":\"flex items-center gap-x-1.5 text-sm\",\"children\":[[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"none\",\"strokeWidth\":\"2\",\"viewBox\":\"0 0 24 24\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"size-4\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\",\"children\":[]}],[\"$\",\"path\",\"1\",{\"d\":\"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z\",\"children\":[]}]]],\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}],\"2024.06.12\"]}]]}],[\"$\",\"div\",null,{\"data-orientation\":\"horizontal\",\"role\":\"none\",\"className\":\"w-full h-[1px] bg-zinc-300 dark:bg-zinc-700 shrink-0\"}],\"$L19\"]}]\n16:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\","])</script><script>self.__next_f.push([1,"\"title\",\"2\",{\"children\":\"라이브러리 개발 환경 설정 후기 (Rollup -\u003e Vite 전환 후기) | k2ep-ru2ning\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Vite 기반의 React 컴포넌트 라이브러리 개발 환경 설정 후기\"}],[\"$\",\"meta\",\"4\",{\"name\":\"author\",\"content\":\"k2ep-ru2ning\"}],[\"$\",\"link\",\"5\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"6\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?a4b7945e0e6b49fb\",\"type\":\"image/png\",\"sizes\":\"180x180\"}],[\"$\",\"meta\",\"7\",{\"name\":\"next-size-adjust\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"1a:I[269,[\"566\",\"static/chunks/566-ec14f674f7a91999.js\",\"269\",\"static/chunks/269-eaf94b263c957a22.js\",\"487\",\"static/chunks/app/posts/contents/%5B...slug%5D/page-61e2b7ba0b345ae4.js\"],\"Image\"]\n"])</script><script>self.__next_f.push([1,"19:[\"$\",\"div\",null,{\"className\":\"prose prose-zinc dark:prose-invert prose-sm sm:prose-base prose-code:text-sm sm:prose-code:text-base max-w-full\",\"children\":[[\"$\",\"h2\",null,{\"children\":\"문제\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"회사에서 React 컴포넌트 라이브러리를 개발하는 중인데, 기존에는 빌드 도구로 Rollup을 사용하고 있었다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"팀에서는 \",[\"$\",\"code\",null,{\"children\":\"yarn link\"}],\"를 활용해 개발 중인 라이브러리의 심볼릭 링크를 만들고, (local의) 테스트용 애플리케이션에서 라이브러리를 링크해서 개발하고 있었다. 코드를 변경할 때마다 라이브러리가 빌드되고, 빌드된 결과물이 테스트용 애플리케이션에 반영되어 화면에 변경사항이 표시되는 방식이다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"그런데, \",[\"$\",\"strong\",null,{\"children\":\"빌드 시간이 1분 넘게 걸렸기 때문에, 코드를 변경하고 변경사항을 눈으로 확인하는 데 너무 오래 걸렸다.\"}]]}],\"\\n\",[\"$\",\"$L1a\",null,{\"src\":\"/images/posts/2024/lib-configuration-based-on-vite/rollup-build-time.png\",\"alt\":\"rollup build 속도\",\"width\":420,\"height\":120,\"priority\":true,\"className\":\"rounded-md mx-auto\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"기존에 사용하던 Rollup 버전이 너무 오래 되었고(기존 버전: \",[\"$\",\"code\",null,{\"children\":\"2\"}],\", 24.06.12 기준 최신 버전: \",[\"$\",\"code\",null,{\"children\":\"4\"}],\"), Rollup 설정 파일도 2년에 퇴사 하신분의 commit을 끝으로 관리되지 않았다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"그래서 최근 빠른 속도로 각광 받고 있는 Vite를 도입하면서 빌드 속도를 개선하기로 했다.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"사용한 Vite 플러그인\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"@vitejs/plugin-react\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vite 프로젝트에서 React를 사용할 수 있게 만드는 플러그인, Babel 기반.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"vite-plugin-dts\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"lib mode로 Vite를 사용할 때, declaration file(\",[\"$\",\"code\",null,{\"children\":\"*.d.ts\"}],\")을 생성해주는 플러그인.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"개발 중인 라이브러리가 TypeScript로 작성한 라이브러리이기도 하고, 클라이언트 코드에서 타입 추론이 가능하도록 이 플러그인을 사용했다.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"vite-tsconfig-paths\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"tsconfig.json\"}],\"에 작성한 \",[\"$\",\"code\",null,{\"children\":\"compilerOptions.paths\"}],\"를 이용해, Vite가 모듈의 위치를 찾도록 도와주는 플러그인.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"vite.config.ts\"}],\"에 \",[\"$\",\"code\",null,{\"children\":\"resolve.alias\"}],\"를 설정할 필요가 없어진다. (같은 설정을 \",[\"$\",\"code\",null,{\"children\":\"tsconfig.json\"}],\"과 \",[\"$\",\"code\",null,{\"children\":\"vite.config.ts\"}],\"에 해야하는 불편함을 해결해준다.)\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"vite-plugin-css-injected-by-js\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vite로 빌드하면, bundle된 js 파일과 css 파일이 생성된다. 이때 생성된 css를 bundle된 js 내부에서 import하도록 만들고 싶어서 이 플러그인을 사용했다. 이렇게 하면, 클라이언트 코드에서 별도로 라이브러리의 css 파일을 import 할 필요가 없다.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Vite 플러그인 설정하기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"@vitejs/plugin-react\"}],\" 플러그인을 사용해서 Vite 프로젝트에서 React 코드를 작성할 수 있게 했고, \",[\"$\",\"strong\",null,{\"children\":\"vite-plugin-dts\"}],\" 플러그인을 사용해서 lib 모드로 빌드할 때, \",[\"$\",\"code\",null,{\"children\":\"*.d.ts\"}],\" 파일들을 생성하게 만들었다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"vite-tsconfig-paths\"}],\" 플러그인을 이용해 path에 대한 alias 설정을 \",[\"$\",\"code\",null,{\"children\":\"tsconfig.json\"}],\" 파일에만 하고 동일한 설정을 vite에서 사용할 수 있게 만들었다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"그리고 클라이언트 코드에서 별도로 css 파일을 import 할 필요없도록 생성된 css를 bundle된 js 파일에 주입하게 \",[\"$\",\"strong\",null,{\"children\":\"vite-plugin-css-injected-by-js\"}],\" 플러그인을 사용했다.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"vite.config.ts\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" { defineConfig } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" react \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"@vitejs/plugin-react\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" dts \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite-plugin-dts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" tsconfigPaths \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite-tsconfig-paths\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" cssInjectedByJsPlugin \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite-plugin-css-injected-by-js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\" default\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\" defineConfig\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  plugins: [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    react\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    dts\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      /*\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        이 옵션이 false이면\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        기본적으로 {outDir}/src에 index.d.ts를 비롯한\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        *.d.ts 파일을 생성한다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        이 옵션이 true이면\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        {outDir}/dts에 src/index.d.ts를 생성해준다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        즉, dts 디렉터리를 만들고\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        그 디렉터리에 src/index.d.ts 파일을 생성한다. \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        dts 디렉터리를 만들고 싶지 않다면 굳이 쓸 필요 없다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        그리고 package.json의 \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        \\\"types\\\"에 index.d.ts 파일 경로를 작성하면 된다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      */\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      insertTypesEntry: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79C0FF\",\"--shiki-light\":\"#0550AE\"},\"children\":\"true\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    tsconfigPaths\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    cssInjectedByJsPlugin\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  ]\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  /*\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    vite-tsconfig-paths 플러그인을 사용했기 때문에\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    이미 tsconfig.json에 설정한 경로 alias 설정을\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    vite 설정 파일에 또 설정할 필요가 없다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  */\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  /*\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    resolve: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      alias: [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"          find: '@',\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"          replacement: path.resolve(__dirname, 'src'),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"        },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  */\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}]]}]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Vite 빌드 설정하기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Vite 프로젝트를 라이브러리 형태로 빌드하기 위해서는 \",[\"$\",\"code\",null,{\"children\":\"build.lib\"}],\" 옵션을 설정해야 한다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"엔트리 파일이 무엇인지, 패키지 이름은 무엇인지, 빌드 결과로 생성될 js 파일의 이름은 어떻게 할 것인지, 어떤 모듈 시스템을 사용해서 빌드할 것인지\"}],\" 등을 설정할 수 있다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"추가로, 번들에 포함하고 싶지 않은 dependency들은 \",[\"$\",\"code\",null,{\"children\":\"build.rollupOptions.external\"}],\"에 명시할 수 있다.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"vite.config.ts\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" path \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"node:path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" { defineConfig } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"// ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\" default\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\" defineConfig\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  build: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    // 빌드 결과를 담은 디렉터리.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    // rollup을 쓸 때도 \\\"dist\\\"였기에 그대로 \\\"dist\\\"로 설정\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    outDir: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"dist\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    lib: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 엔트리 파일\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      entry: path.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(__dirname, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"src/index.ts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 패키지 이름\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      name: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"@your-company/your-package\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 빌드 결과물 파일 이름\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"      fileName\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": (\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"format\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" `index.${\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"format\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"}.js`\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 어떤 모듈 시스템에 호환되도록 빌드할 것인가\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // rollup을 쓸 때 es, cjs 방식으로 빌드했었기 때문에,\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 해당 방식을 사용하게 설정\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      formats: [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"es\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"cjs\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    rollupOptions: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 라이브러리 빌드 결과에 포함하고 싶지 않은 패키지를 명시할 수 있다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"      // 또한, 이 패키지들을 peer dependencies에 명시하면 된다.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      external: [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"react\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"react-dom\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"mobx\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"mobx-react-lite\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"@your-company/your-another-package\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  }\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}]]}]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"전체 Vite 설정\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"앞서 언급한 플러그인, 빌드 설정을 정리한 Vite 설정 파일은 다음과 같다. (확실히 기존에 사용하던 rollup 설정 파일보다 간결해졌다.)\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"vite.config.ts\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" path \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"node:path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" { defineConfig } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" react \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"@vitejs/plugin-react\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" dts \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite-plugin-dts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" tsconfigPaths \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite-tsconfig-paths\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" cssInjectedByJsPlugin \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"vite-plugin-css-injected-by-js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\" default\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\" defineConfig\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  plugins: [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    react\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    dts\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      insertTypesEntry: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79C0FF\",\"--shiki-light\":\"#0550AE\"},\"children\":\"true\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    tsconfigPaths\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"    cssInjectedByJsPlugin\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  ]\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  build: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    outDir: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"dist\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    lib: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      entry: path.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"(__dirname, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"src/index.ts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      name: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"@your-company/your-package\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#D2A8FF\",\"--shiki-light\":\"#8250DF\"},\"children\":\"      fileName\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": (\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"format\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" `index.${\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"format\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"}.js`\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      formats: [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"es\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"cjs\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    rollupOptions: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      external: [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"react\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"react-dom\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"mobx\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"mobx-react-lite\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"        \\\"@your-company/your-another-package\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"      ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  }\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFA657\",\"--shiki-light\":\"#953800\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}]]}]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"package.json 파일 설정\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"라이브러리 개발할 때는 \",[\"$\",\"code\",null,{\"children\":\"main\"}],\", \",[\"$\",\"code\",null,{\"children\":\"module\"}],\", \",[\"$\",\"code\",null,{\"children\":\"types\"}],\", \",[\"$\",\"code\",null,{\"children\":\"files\"}],\" 속성값을 잘 설정하면 된다.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"name\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"@your-company/your-package\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"module\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"main\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"./dist/index.cjs.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"module\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"./dist/index.es.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"types\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"./dist/dts/src/index.d.ts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"files\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"dist\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"type\"}],\"은 \",[\"$\",\"code\",null,{\"children\":\"\\\"module\\\"\"}],\" 또는 \",[\"$\",\"code\",null,{\"children\":\"\\\"commonjs\\\"\"}],\" 값을 가질 수 있는데, \",[\"$\",\"code\",null,{\"children\":\"\\\"module\\\"\"}],\"인 경우, \",[\"$\",\"code\",null,{\"children\":\".js\"}],\" 파일을 ES 모듈 시스템으로 해석한다는 의미이다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"main\"}],\"은 클라이언트 코드에서 라이브러리를 \",[\"$\",\"code\",null,{\"children\":\"require()\"}],\"로 임포트할 때, 진입점이 되는 파일을 설정한다. vite가 \",[\"$\",\"code\",null,{\"children\":\"dist/index.cjs.js\"}],\"로 번들링하도록 설정했기 때문에 \",[\"$\",\"code\",null,{\"children\":\"\\\"./dist/index.cjs.js\\\"\"}],\" 경로를 적어준다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"module\"}],\"은 클라이언트 코드에서 라이브러리를 \",[\"$\",\"code\",null,{\"children\":\"import\"}],\"로 임포트할 때, 진입점이 되는 파일을 설정한다. vite가 \",[\"$\",\"code\",null,{\"children\":\"dist/index.es.js\"}],\"로 번들링하도록 설정했기 때문에 \",[\"$\",\"code\",null,{\"children\":\"\\\"./dist/index.es.js\\\"\"}],\" 경로를 적어준다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"types\"}],\"에는 타입 선언 파일의 위치를 지정하면 된다. vite-plugin-dts 플러그인이 \",[\"$\",\"code\",null,{\"children\":\"dist/dts/src/index.d.ts\"}],\"를 생성하므로, \",[\"$\",\"code\",null,{\"children\":\"\\\"./dist/dts/src/index.d.ts\\\"\"}],\" 경로를 적어준다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"files\"}],\"에는 패키지를 배포할 때 포함할 파일이나 디렉터리를 작성하면 된다. dist 디렉터리를 포함해서 배포할 것이므로, \",[\"$\",\"code\",null,{\"children\":\"[\\\"dist\\\"]\"}],\"를 적어준다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"link를 이용해 개발하기 위한 명령어\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"vite build --watch\"}],\" 명령어를 실행하면, file 변경사항이 발생할 때마다(코드 수정사항이 생길 때마다) 빌드되고, 테스트용 애플리케이션에서는 변경사항을 감지해서 화면을 갱신한다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"클라이언트 코드에서 타입 추론이 제대로 되지 않는 문제 해결\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"환경 설정을 끝마쳤다고 생각했는데, 마지막에 클라이언트 코드에서 타입 추론이 제대로 되지 않는 문제가 발생했다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"기존에는 타입스크립트 설정 파일에서 다음과 같이 \",[\"$\",\"strong\",null,{\"children\":\"상대경로\"}],\"를 이용해 경로의 alias를 설정했다.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"tsconfig.json\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"compilerOptions\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"    \\\"paths\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"      \\\"@/*\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"./src/*\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"}\"}]}]]}]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"그런데 이 경우, 클라이언트 코드에서 타입 추론이 제대로 되지 않았다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"번들된 결과물을 살펴보니, 생성된 \",[\"$\",\"code\",null,{\"children\":\"*.d.ts\"}],\" 파일에서 \",[\"$\",\"code\",null,{\"children\":\"@\"}],\" alias가 실제 경로로 변환되지 않고 \",[\"$\",\"code\",null,{\"children\":\"@\"}],\" 그대로 남아있었다.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"dist/../index.d.ts\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" { SomeType } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"@/types\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}]}]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":[\"생성된 \",[\"$\",\"code\",null,{\"children\":\"*.d.ts\"}],\" 파일들에서 \",[\"$\",\"code\",null,{\"children\":\"@\"}],\" alias 대신 실제 경로를 표시하려면, 타입스크립트 설정에서 \",[\"$\",\"code\",null,{\"children\":\"compilerOptions.baseUrl\"}],\" 옵션을 설정하고 \",[\"$\",\"code\",null,{\"children\":\"compilerOptions.paths\"}],\" 옵션에 \\\"\",[\"$\",\"code\",null,{\"children\":\"./\"}],\"으로 시작하지 않는 경로\\\"를 작성하면 된다.\"]}]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"tsconfig.json\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"json\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"  \\\"compilerOptions\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"    \\\"baseUrl\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\".\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"    \\\"paths\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#7EE787\",\"--shiki-light\":\"#116329\"},\"children\":\"      \\\"@/*\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\"\\\"src/*\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"    }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"  }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#8B949E\",\"--shiki-light\":\"#6E7781\"},\"children\":\"  // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\"}\"}]}]]}]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"번들된 결과물을 살펴보면, 생성된 \",[\"$\",\"code\",null,{\"children\":\"*.d.ts\"}],\" 파일에서 \",[\"$\",\"code\",null,{\"children\":\"@\"}],\" alias가 사라지고 실제 경로로 치환되었다.\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[[\"$\",\"figcaption\",null,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":\"dist/../index.d.ts\"}],[\"$\",\"pre\",null,{\"style\":{\"--shiki-dark\":\"#e6edf3\",\"--shiki-light\":\"#1f2328\",\"--shiki-dark-bg\":\"#0d1117\",\"--shiki-light-bg\":\"#ffffff\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"ts\",\"data-theme\":\"github-dark-default github-light-default\",\"style\":{\"display\":\"grid\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\" { SomeType } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FF7B72\",\"--shiki-light\":\"#CF222E\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#A5D6FF\",\"--shiki-light\":\"#0A3069\"},\"children\":\" \\\"../../../../types\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E6EDF3\",\"--shiki-light\":\"#1F2328\"},\"children\":\";\"}]]}]}]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"그리고 실제로 클라이언트 코드에서 배포한 라이브러리를 사용할 때, \",[\"$\",\"strong\",null,{\"children\":\"타입 추론이 잘 되었다.\"}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"결과\"}],\"\\n\",[\"$\",\"$L1a\",null,{\"src\":\"/images/posts/2024/lib-configuration-based-on-vite/vite-build-time.png\",\"alt\":\"vite build 속도\",\"width\":430,\"height\":170,\"priority\":true,\"className\":\"rounded-md mx-auto\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"기존에 \",[\"$\",\"strong\",null,{\"children\":\"1분이 넘던 빌드시간을 10초대로 줄였다.\"}],\" 팀에서 \",[\"$\",\"code\",null,{\"children\":\"yarn link\"}],\"를 활용해 개발하고 있었는데, 코드를 변경할 때마다 발생하는 빌드에 걸리는 시간이 줄어들어 \",[\"$\",\"strong\",null,{\"children\":\"팀 개발 생산성이 증가했다\"}],\". 팀원들도 속도가 빨라져서 많이 좋아했다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"오래된 버전의 Rollup을 최신 버전의 Vite로 전환하면서, 관리 되지 않던 빌드도구 설정 파일을 최신화 할 수 있었다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"과거 Rollup 버전으로 빌드했을 때 클라이언트 코드에서 타입 추론이 되지 않았었는데, Vite로 전환하면서 타입 추론이 가능하게 설정했다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"빌드도구/번들러 설정은 막연히 어렵다고 생각해왔는데, 이번에 Vite로 성공적으로 전환하면서 자신감을 얻을 수 있었다.\"}]]}]\n"])</script></body></html>